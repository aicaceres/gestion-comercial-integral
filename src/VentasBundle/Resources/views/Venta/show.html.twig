{% extends "AppBundle::layout.html.twig" %}
{% block pageheader %}
<div class="pageheader notab">
    <h1 class="pagetitle">Ventas a Clientes</h1>
</div><!--pageheader-->
{% endblock %}
{% block contentwrapper %}
<div id="contentwrapper" class="contentwrapper">
<h1 id="popup_title" >VENTA:  #{{ entity.nroOperacion }} <span class="floatright">{{entity.estado}}</span></h1>
<div class="divEdicion">
<style type="text/css">
    #form-venta label{
        font-weight: bold;
        padding: 0px 2px 0px 8px;
    }
</style>

<form id="form-venta" name="ventasbundle_venta" class="form-horizontal">
    <fieldset style="padding:10px 0;margin:0 0 10px 0; width: 100%; background-color:gainsboro">

        <div style="display:inline-block; width: 24%;">
            <label>OPERACIÓN: </label>
            <input type="text" disabled="disabled" class="width100" value="#{{entity.nroOperacion}}"/>
        </div>
        <div style="display:inline-block; width: 24%;">
            <label>FECHA/HORA: </label>
            <input type="text" disabled="disabled" class="width100" value="{{entity.fechaVenta|date('d-m-Y H:i')}}"/>
        </div>
        <div style="display:inline-block; width: 24%;">
            <label>USUARIO: </label>
            <input type="text" disabled="disabled" class="width100" value="{{entity.createdBy.username}}"/>
        </div>
        {% if entity.estado == 'ANULADO' %}
        <div style="display:inline-block; width: 24%;">
            <label>ANULADO: <span style="color:red; font-size:14px"> &nbsp; {{entity.updated|date('d-m-Y H:i:s') }} | {{entity.updatedBy.username}}</span></label>
        </div>
        {% endif %}
    </fieldset>
    <fieldset>
        <div style="display:inline-block; width: 50%;">
            <label>CLIENTE: </label>
            <select style="width:100%" disabled="disabled">
                <option value="{{entity.cliente.id}}" selected="selected">{{entity.cliente.nombre}}</option>
            </select>
        </div>
        <div style="display:inline-block; width: 20%;">
            <label>LISTA DE PRECIOS: </label>
            <select style="width:100%" disabled="disabled">
                <option value="{{entity.precioLista.id}}">{{entity.precioLista.nombre}}</option>
            </select>
        </div>
        <div style="display:inline-block; width: 25%;">
            <label>TRANSPORTE: </label>
            <select style="width:100%" disabled="disabled">
                <option value="{{entity.transporte.id}}">{{entity.transporte.nombre}}</option>
            </select>
        </div>
    </fieldset>
    <fieldset>
    <div class="datos-cliente" style="display:inline-block; width:100%; vertical-align: top;">
        {% include "VentasBundle:Venta:_partial-datos-cliente.html.twig" with {'item':entity.cliente} %}
    </fieldset>
    <fieldset>
            <div style="display:inline-block; width: 35%;">
                <label>FORMA DE PAGO: </label>
                <select style="width:100%" disabled="disabled">
                    <option value="{{entity.formaPago.id}}">{{entity.formaPago.nombre}}</option>
                </select>
            </div>
            <div style="display:inline-block; width: 20%;">
                <label>MONEDA: </label>
                <select style="width:100%" disabled="disabled">
                    <option value="{{entity.moneda.id}}">{{entity.moneda.nombre}}</option>
                </select>
            </div>
            <div style="display:inline-block; width: 25%;">
                <label>DEPÓSITO: </label>
                <select style="width:100%" disabled="disabled">
                    <option value="{{entity.deposito.id}}">{{entity.deposito.nombre}}</option>
                </select>
            </div>
        </fieldset>
        <fieldset>
            <div class="datos-formapago" style="display:inline-block; width: 35%; vertical-align: top;">
                {% include "VentasBundle:Venta:_partial-datos-formapago.html.twig" with {'item':entity.formaPago}  %}
            </div>
            <div class="datos-moneda" style="display:inline-block; width: 20%; vertical-align: top;">
                {% if entity.cotizacion != 1 %}
                    <label> TIPO DE CAMBIO: </label> {{entity.cotizacion }}
                {% endif %}
            </div>
        </fieldset>
        <fieldset>
            <div style="padding-top: 20px; margin:auto; width: 100%;">

                <table class="venta stdtable noaction" cellspacing="0" cellpadding="0" border="0">
                    <thead>
                        <tr>
                            <th style="width:3%;">#</th>
                            <th>Producto</th>
                            <th style="width:12%;">Cant.</th>
                            <th style="width:10%;">Precio Unit.</th>
                            <th style="width:10%;">SubTotal</th>
                        </tr>
                    </thead>
                <tbody>
                    {% for detalle in entity.detalles %}
                        <tr class="item">
                            <td class="ordTd">{{loop.index}}</td>
                            <td class="prodTd">
                                <label>{{detalle.producto.nombre}}</label>
                            </td>
                            <td class="cantTd alignright">{{ detalle.cantidad }}</td>
                            <td class="precTd alignright">{{ detalle.precioConv|number_format(3,'.',',') }}</td>
                            <td class="itmSubtotalTd alignright">{{ detalle.getTotal|number_format(3,'.',',') }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="4" style="text-align:right">&nbsp; </th>
                            <th class="cktotal red alignright" id="subtotalTh">{{entity.getSubTotal|number_format(3,'.',',') }}</th>
                        </tr>
                    </tfoot>
            </table>

            </div>
        </fieldset>
        <fieldset>
            <div style="margin:auto; width: 100%;">
                <table class="stdtable noaction" cellspacing="0" cellpadding="0" border="0">
    <thead>
        <tr class="resumen">
            <th id="gralSubtotalTd">Subtotal: &nbsp;{{entity.moneda.simbolo}}&nbsp;<span>{{entity.getSubTotal|number_format(3,'.',',') }}</span>.-</th>
            <th>Descuento/Recargo [<span class="porcentajeRecargo">{{ entity.formaPago.porcentajeRecargo }}</span>%]: &nbsp;{{entity.moneda.simbolo}}&nbsp; <span id="importeRecargo">{{entity.getTotalDescuentoRecargo|number_format(3,'.',',')}}</span>.-</th>
            <th class="gralTotalTd">Neto a Pagar: &nbsp;{{entity.moneda.simbolo}}&nbsp;<span id="totalGral">{{entity.getTotal|number_format(3,'.',',')}}</span>.-</th>
        </tr>
    </thead>
</table>


            </div>
        </fieldset>

{% if entity.estado == 'FACTURADO' %}
<fieldset style="padding:10px 0;margin:10px 0 10px 0; width: 100%; background-color:khaki">

        <div style="display:inline-block; width: 20%;">
            <label>COBRO: </label>
            <input type="text" disabled="disabled" class="width100" value="#XX"/>
        </div>
        <div style="display:inline-block; width: 20%;">
            <label>FECHA/HORA: </label>
            <input type="text" disabled="disabled" class="width100" value="{{entity.fechaVenta|date('d-m-Y H:i')}}"/>
        </div>
        <div style="display:inline-block; width: 18%;">
            <label>USUARIO: </label>
            <input type="text" disabled="disabled" class="width100" value="{{entity.createdBy.username}}"/>
        </div>
        <div style="display:inline-block; width: 40%;">
            <label>FACTURA A 0001-00006305 | Cae:7285462613007 | VtoCae: 04/03/2022 </label>
        </div>

    </fieldset>
{% endif %}



        <fieldset>
            <br clear="all">
            <div class="actionbutton">
                <a class="cancelar tabbable" type="button" href="{{ path('ventas_venta')}}">Cancelar</a>
            </div>
        </fieldset>
    </form>



</div>
</div>
{% endblock %}