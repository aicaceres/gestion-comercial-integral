<pdf>
    <dynamic-page page-size="A4" margin-left="70px" margin-right="40px" margin-top="20px" >
        <placeholders>
            <header>
                <div height="60px" width="100%" >
                    <table>
                        <tr>
                            <td border.type="none" vertical-align="middle">
                                <h3>{{app.session.get('labels')['label1']}}.{{app.session.get('labels')['label2']}}  <span font-size="11px"> Unidad de Negocio: {{ app.session.get('unidneg_nombre')  }} </span></h3>
                            </td>
                        </tr>
                    </table>
                    <div border.color="#F5C98F" height="2px" ></div>
                    <div height="5px"></div>
                    <div float="right" font-size="7px"> Impreso: {{'now'|date('d-m-Y H:i')}} {{app.user.username|upper}} </div>
                </div>
            </header>
            <footer>
                <div height="30px" width="100%" text-align="right">
                    <page-number />
                </div>
            </footer>
        </placeholders>
        <h2 text-align="center"> Listado de Ventas</h2>
        <h4><strong>Producto:</strong> {{ filtro['producto'] }}  </h4>
        {% if filtro['desde'] or filtro['hasta'] %}
        <h4><strong>Período:</strong> {{ filtro['desde'] }} al {{ filtro['hasta'] }} </h4>
        {% endif %}
        <div height="10px"></div>

        <table font-size="9px">
            <tr>
                <td border.color="black" background.color="#EEEEEE" height="20px" vertical-align="middle" text-align="center" width="1 cm"><strong>#</strong></td>
                <td border.color="black" background.color="#EEEEEE" height="20px" vertical-align="middle" text-align="center" ><strong>Producto</strong></td>
                <td border.color="black" background.color="#EEEEEE" height="20px" vertical-align="middle" text-align="center" width="2.5 cm"><strong>Cantidad</strong></td>
                <td border.color="black" background.color="#EEEEEE" height="20px" vertical-align="middle" text-align="center" width="2 cm" ><strong>Importe</strong>
                </td>
            </tr>
            {% if ventas|length>0   %}
                {% set total = 0 %}
                {% for venta in ventas %}
                    {% set total = total + venta.importe %}
                    <tr>
                        <td height="20px" vertical-align="middle" text-align="right" padding-right="10px">{{loop.index}}</td>
                        <td height="20px" vertical-align="middle" padding-left="5px">{{venta.producto}}</td>
                        <td height="20px" vertical-align="middle" text-align="right" padding-right="10px">{{venta.cantidad}}</td>
                        <td height="20px" vertical-align="middle" text-align="right" padding-right="10px">{{venta.importe|number_format(2, ',', '.')}}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="4" height="30px" vertical-align="middle" padding-left="10px">
                        <strong>No hay notas coincidentes con el criterio de búsqueda</strong></td>
                </tr>
            {% endif %}
            <tr>
                <td colspan="4" border.color="black" background.color="#EEEEEE" height="20px" vertical-align="middle" padding-right="10px" text-align="right">
                    <strong>Total de Ventas: {{total|number_format(2, ',', '.')}}</strong></td>
            </tr>
        </table>
    </dynamic-page>
</pdf>